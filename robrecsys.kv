#:import Factory kivy.factory.Factory

<OkPopup@Popup>
    auto_dismiss: False
    title: "The model has been created and sent to the server!"
    size_hint: .6, .17
    pos_hint: {"x": .2, "top": .9}
    Button:
        background_normal: ''
        background_color: [0,0,0,0]
        text: 'Ok'
        canvas.before:
            Color:
                rgba: (.2,.39,.45,1)
            RoundedRectangle:
                size: self.size
                pos: self.pos
                radius: [10]
        on_release: root.dismiss()

<ScreenLogin>
    canvas.before:
        Color:
            rgba: (.35, .69, .75, 1)
        Rectangle:
            pos: self.pos
            size: self.size
    BoxLayout:
        orientation: 'vertical'
        size_hint: (.6, .53)
        pos: (root.width/2 - (root.width * 0.6)/2, root.height/2 - root.height/2*0.3)
        Image:
            source: 'logo3.png'
        BoxLayout:
            orientation: 'vertical'
            AnchorLayout:
                anchor_x: 'left'
                anchor_y: 'bottom'
                Label:
                    text_size: self.size
                    halign: 'left'
                    valign: 'bottom'
                    text: 'Login: '
            TextInput:
                id: tbLogin
                multiline: False
                background_normal: ''
                font_size: root.height*0.025
                size_hint: [1,.8]
            AnchorLayout:
                anchor_x: 'left'
                anchor_y: 'bottom'
                Label:
                    text_size: self.size
                    halign: 'left'
                    valign: 'bottom'
                    text: 'Password: '
                    rgba: (.22, .49, .71, 1)
            TextInput:
                id: tbPassword
                multiline: False
                font_size: root.height*0.025
                background_normal: ''
                password: True
                size_hint: [1,.8]
            BoxLayout:
                padding: [0, 5, 0, 0]
                spacing: 1
                Button:
                    background_normal: ''
                    background_color: [0,0,0,0]
                    text: 'Sign in'
                    canvas.before:
                        Color:
                            rgba: (.2,.39,.45,1)
                        RoundedRectangle:
                            size: self.size
                            pos: self.pos
                            radius: [10]
                    on_release:
                        if (root.auth()): root.manager.current = 'screen_main'


<ScreenMain>:
    canvas.before:
        Color:
            rgba: (1, 1, 1, 1)
        Rectangle:
            pos: self.pos
            size: self.size
    AnchorLayout:
        anchor_x: 'center'
        anchor_y: 'top'
        AnchorLayout:
            size_hint: [1,0.1]
            canvas.before:
                Color:
                    rgba: (.35, .69, .75, 1)
                Rectangle:
                    pos: self.pos
                    size: self.size
            Image:
                size_hint: [0.9,0.9]
                source: 'Logo2.png'
    BoxLayout:
        pos: (root.width*0.1, root.height*0.25)
        orientation: 'vertical'
        size_hint: [.8, .65]
        BoxLayout:
            orientation: 'vertical'
            size_hint: [1, .5]
            Label:
                text: "Recommender system"
                color: (.25,.36,.38,1)
                font_size: root.height*0.04
            Label:
                text_size: self.size
                halign: 'left'
                valign: 'top'
                color: (.25,.36,.38,1)
                font_size: root.height*0.025
                text: 'Click the start button! The program will automatically predict the data and send it to the server. Algorithm used: SVD.'
        BoxLayout:
            padding: [0, 120]
            Button:
                background_normal: ''
                background_color: [0,0,0,0]
                text: 'Start'
                canvas.before:
                    Color:
                        rgba: (.2,.39,.45,1)
                    RoundedRectangle:
                        size: self.size
                        pos: self.pos
                        radius: [15]
                on_release: root.predcition()

